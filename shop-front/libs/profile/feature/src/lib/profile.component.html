<p-toast position="bottom-right"></p-toast>
<div class="profile">
  <section class="section">
    <h1>Profile</h1>
  </section>
  <section class="section">
    <div class="section__top">
      <h4 class="section__top__title">Personal details</h4>
      <button
        class="section__top__btn"
        [className]="!showFormPersonalDetails ? '' : 'hidden'"
        (click)="toggleFormPersonalDetails()"
      >
        Edit
      </button>
      <button
        class="section__top__btn"
        [className]="showFormPersonalDetails ? '' : 'hidden'"
        (click)="toggleFormPersonalDetails()"
      >
        Cancel
      </button>
    </div>
    <div class="section__content">
      <form [formGroup]="formPersonalDetails" class="form">
        <div [className]="!showFormPersonalDetails ? '' : 'hidden'">
          <p>{{ userData?.name }}</p>
          <p>{{ userData?.email }}</p>
        </div>
        <div
          class="show_form"
          [className]="showFormPersonalDetails ? '' : 'hidden'"
        >
          <div class="form__input">
            <label for="name">Name</label>
            <input
              type="text"
              id="name"
              formControlName="name"
              pInputText
              [value]="userData?.name"
            />
          </div>
          <div class="form__input">
            <label for="email">Email</label>
            <input
              type="email"
              id="email"
              formControlName="email"
              [value]="userData?.email"
              pInputText
            />
          </div>

          <button
            pButton
            type="button"
            label="Save"
            class="p-button-secondary form__btn"
            [disabled]="
              !formPersonalDetails.dirty || formPersonalDetails.invalid
            "
            (click)="submitFormPersonalDetails()"
          ></button>
        </div>
      </form>
    </div>
  </section>
  <section class="section">
    <div class="section__top">
      <h4 class="section__top__title">Password</h4>
      <button
        class="section__top__btn"
        [className]="!showFormPassword ? '' : 'hidden'"
        (click)="toggleFormPassword()"
      >
        Change password
      </button>
      <button
        class="section__top__btn"
        [className]="showFormPassword ? '' : 'hidden'"
        (click)="toggleFormPassword()"
      >
        Cancel
      </button>
    </div>
    <div class="section__content">
      <form [formGroup]="formPassword" class="form">
        <div [className]="!showFormPassword ? '' : 'hidden'">
          <p>************</p>
        </div>
        <div class="show_form" [className]="showFormPassword ? '' : 'hidden'">
          <div class="form__input">
            <label for="currentPassword">Current password</label>
            <p-password
              type="password"
              id="currentPassword"
              formControlName="currentPassword"
              [toggleMask]="true"
              [feedback]="false"
            ></p-password>
          </div>
          <div class="form__input">
            <label for="password">New password</label>
            <p-password
              type="password"
              id="password"
              formControlName="password"
              [toggleMask]="true"
            ></p-password>
            <small
              class="p-invalid"
              *ngIf="
            formPassword.get('password')?.touched && !!formPassword.get('password')?.errors?.['minlength']
          "
            >
              Password must be at least 8 characters
            </small>
          </div>
          <div class="form__input">
            <label for="telephone" class="block">Confirm password</label>
            <p-password
              type="password"
              id="passwordConfirmation"
              formControlName="passwordConfirmation"
              [toggleMask]="true"
              [feedback]="false"
            ></p-password>
            <small
              class="p-invalid"
              *ngIf="
              formPassword.get('passwordConfirmation')?.touched && !formPassword.get('passwordConfirmation')?.errors && !!formPassword.errors?.['notSame']
        "
            >
              Confirm password not match with password
            </small>
          </div>
          <button
            pButton
            type="button"
            label="Save"
            class="p-button-secondary form__btn"
            [disabled]="formPassword.invalid"
            (click)="submitFormPassword()"
          ></button>
        </div>
      </form>
    </div>
  </section>
  <section class="section">
    <div class="section__top">
      <h4 class="section__top__title">Personal details</h4>
      <button
        class="section__top__btn"
        [className]="!showFormAddress ? '' : 'hidden'"
        (click)="toggleFormPersonalDetails()"
      >
        Edit
      </button>
      <button
        class="section__top__btn"
        [className]="showFormAddress ? '' : 'hidden'"
        (click)="toggleFormPersonalDetails()"
      >
        Cancel
      </button>
    </div>
    <div class="section__content">
      <form [formGroup]="formPersonalDetails" class="form">
        <div [className]="!showFormAddress ? '' : 'hidden'">
          <p>{{ userData?.name }}</p>
          <p>{{ userData?.email }}</p>
        </div>
        <div class="show_form" [className]="showFormAddress ? '' : 'hidden'">
          <div class="form__input">
            <label for="name">Name</label>
            <input
              type="text"
              id="name"
              formControlName="name"
              pInputText
              [value]="userData?.name"
            />
          </div>
          <div class="form__input">
            <label for="email">Email</label>
            <input
              type="email"
              id="email"
              formControlName="email"
              [value]="userData?.email"
              pInputText
            />
          </div>

          <button
            pButton
            type="button"
            label="Save"
            class="p-button-secondary form__btn"
            [disabled]="
              !formPersonalDetails.dirty || formPersonalDetails.invalid
            "
            (click)="submitFormPersonalDetails()"
          ></button>
        </div>
      </form>
    </div>
  </section>
</div>
